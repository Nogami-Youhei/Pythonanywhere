{% load static %}
<!doctype html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>PCR</title>
    <meta name="description" content="機械学習を簡単に実行">
    <link rel="stylesheet" href="https://unpkg.com/ress/dist/ress.min.css">
    <link rel="stylesheet" type="text/css" href="{% static 'pls/css/style.css' %}">
    <link rel="icon" href="/static/pls/img/favicon.png" type="image/x-icon">
</head>
<body>
    <div class="wrapper2">
    <div id="outline" class="big-bg">
        <header class="page-header wrapper">
            <h1><a href="{% url 'index' %}"><img class="logo" src="/static/pls/img/Machine.png" alt="Machine"></a></h1>
            <nav>
                <ul class="main-nav">
                    <li><a href="{% url 'outline' %}">OutLine</a></li>
                    <li><a href="{% url 'pls' %}">PLS</a></li>
                    <li><a href="{% url 'pcr' %}">PCR</a></li>
                </ul>
            </nav>
        </header>
        <div class="wrapper">
            <h2 class="page-title">主成分回帰（PCR）</h2>
            <hr>
        </div>
    </div>
    <div class="pcr-contents wrapper">
    <p class="outline">主成分分析とは、たくさんの量的な説明変数を、より少ない指標や合成変数に要約する手法です。</p>
    <p>※縦はデータ、横は説明変数となるように、エクセルからコピーして貼り付けてください</p>
    <p class="message">{{ message|safe }}</p>
    <form action="{% url 'pcr' %}" method="post">
        <table>
        {% csrf_token %}
        <tr><th>
        <label for="目的変数">目的変数: </label>
        </th>
        <td>
        <input id="目的変数" type="text" name="目的変数" size="40" placeholder="エクセルからコピペ">
        </td></tr>
        <tr><th>
        <label for="説明変数">説明変数: </label>
        </th>
        <td>
        <textarea id="説明変数" name="説明変数" rows="4" cols="40" placeholder="エクセルからコピペ"></textarea>
        </td></tr>
        <tr><th>
        <label for="n_components">主成分の数: </label>
        </th><td>
        <select name="n_components" class=button2 id="n_components">
        {% for i in range1 %}
        <option value="{{i}}">{{i}}</option>
        {% endfor %}
        </select>
        </td></tr>
        <tr><td>
        <input type="submit" class="button" value="click">
        </td></tr>
        </table>
    </form>
    <div class="result">
    <p> {{ components1|safe }}
    {% for item in components2 %}
    {{ item }}<br>
    {% endfor %}
    </p>
    <p>{{ variance_ratio|safe }}</p>
    <p>{{ predict|safe }}</p>
    <p>{{ R2|safe }}</p>
    </div>
    </div>
    <footer>
        <div class="wrapper">
            <p><small>&copy; 2023 Nogami-Youhei</small></p>
        </div>
    </footer>
    </div>
</body>
</html>